require './viewer.scss'

Common = window.ObojoboDraft.Common
TextGroup = Common.textGroup.TextGroup
TextGroupEl = Common.chunk.textChunk.TextGroupEl
TextChunk = Common.chunk.TextChunk
SelectionHandler = Common.chunk.textChunk.TextGroupSelectionHandler

selectionHandler = new SelectionHandler()

Heading = React.createClass
	statics:
		type: 'ObojoboDraft.Chunks.Heading'
		register: -> OBO.registerChunk Heading
		getSelectionHandler: -> selectionHandler

		createNewNodeData: ->
			tg = TextGroup.create(1, { indent:0 })
			# tg.first.text.insertText 0, 'Heading'
			# tg.first.text.styleText 'b'

			# console.log 'HEADING MADE'
			# tg.__debug_print()

			textGroup: tg
			headingLevel: 1

		cloneNodeData: (data) ->
			textGroup: data.textGroup.clone()
			headingLevel: data.headingLevel

		createNodeDataFromDescriptor: (descriptor) ->
			textGroup: TextGroup.fromDescriptor descriptor.content.textGroup, 1, { indent:0 }
			headingLevel: descriptor.content.headingLevel

		getDataDescriptor: (chunk) ->
			data = chunk.modelState

			textGroup: data.textGroup.toDescriptor()
			headingLevel: data.headingLevel

	render: ->
		data = @props.chunk.modelState

		inner = React.createElement('h' + data.headingLevel, null,
			`<TextGroupEl text={data.textGroup.first.text} indent={data.textGroup.first.data.indent} groupIndex="0" />`
		)

		`<TextChunk className='obojobo-draft--chunks--heading pad'>
			{inner}
		</TextChunk>`


Heading.register()

module.exports = Heading